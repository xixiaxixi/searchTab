<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Tab</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="padding-element"></div>

    <div class="container-center">
        <!-- 搜索栏容器 -->
        <div id="search_bar_container"></div>

        <!-- 分割线 -->
        <div id="split-line"></div>

        <!-- 卡片式内容区域 -->
        <div id="cards-section">
            <div id="cards-container">
                    <div class="loading-message" id="cards-loading-message">正在初始化卡片...</div>
                </div>
        </div>
    </div>

    <div class="padding-element"></div>

    <!-- 固定在左下角的工具栏 -->
    <div id="bottom-toolbar">
        <a class="toolbar-link" id="author-link" href="https://github.com/xixiaxixi" target="_blank" title="github.com/xixiaxixi">作者：晨曦</a>
        <button class="toolbar-button" id="search-settings-button" title="搜索栏设置">
            <svg width="16" height="16" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
                <path d="M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56c10.1-8.6 13.8-22.6 9.3-35.2l-0.9-2.6c-18.1-50.5-44.9-96.9-79.7-137.9l-1.8-2.1c-8.6-10.1-22.5-13.9-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85c-2.4-13.1-12.7-23.3-25.8-25.7l-2.7-0.5c-52.1-9.4-106.9-9.4-159 0l-2.7 0.5c-13.1 2.4-23.4 12.6-25.8 25.7l-15.8 85.4c-35.9 13.6-69.2 32.9-99 57.4l-81.9-29.1c-12.5-4.4-26.5-0.7-35.1 9.5l-1.8 2.1c-34.8 41.1-61.6 87.5-79.7 137.9l-0.9 2.6c-4.5 12.5-0.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5c-10.1 8.6-13.8 22.6-9.3 35.2l0.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1c8.6 10.1 22.5 13.9 35.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4c2.4 13.1 12.7 23.3 25.8 25.7l2.7 0.5c26.1 4.7 52.8 7.1 79.5 7.1 26.7 0 53.5-2.4 79.5-7.1l2.7-0.5c13.1-2.4 23.4-12.6 25.8-25.7l15.7-85c36.2-13.6 69.7-32.9 99.7-57.6l81.3 28.9c12.5 4.4 26.5 0.7 35.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l0.9-2.6c4.5-12.3 0.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9c-11.3 26.1-25.6 50.7-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97c-28.1 3.2-56.8 3.2-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9z" fill="currentColor" />
                <path d="M512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176z m79.2 255.2C570 602.3 541.9 614 512 614c-29.9 0-58-11.7-79.2-32.8C411.7 560 400 531.9 400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8C612.3 444 624 472.1 624 502c0 29.9-11.7 58-32.8 79.2z" fill="currentColor" />
            </svg>
            <span id="search-settings-label">搜索设置</span>
        </button>
        <button class="toolbar-button" id="add-card-button" title="添加卡片">
            <svg width="16" height="16" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
                <path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48z" fill="currentColor"/>
            </svg>
            <span id="add-card-label">添加卡片</span>
        </button>
        <button class="toolbar-button" id="layout-settings-button" title="布局设置">
            <svg width="16" height="16" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
                <path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z" fill="currentColor"/>
            </svg>
            <span id="layout-settings-label">布局设置</span>
        </button>
    </div>

    <!-- 搜索栏设置模态框 -->
    <div id="search-settings-modal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3 id="search-settings-title">搜索栏设置</h3>
                <button class="modal-close" id="close-search-settings">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-title">
                    <div class="edit-buttons">
                        <button class="modal-button primary" id="save-button">保存</button>
                        <button class="modal-button secondary" id="add-button">添加</button>
                        <button class="modal-button secondary" id="reset-button">重置</button>
                    </div>
                </div>

                <div id="config-list"></div>

                <div class="other-settings-panel">
                    <div>
                        <input type="checkbox" id="openInNewTabCheckbox">
                        <label for="openInNewTabCheckbox" id="openInNewTabLabel"></label>
                    </div>
                    <div>
                        <input type="checkbox" id="syncSearchBarCheckbox">
                        <label for="syncSearchBarCheckbox" id="syncSearchBarLabel"></label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 卡片配置模态框 -->
    <div id="card-config-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title"></h3>
                <button class="modal-close" id="close-card-config">&times;</button>
            </div>
            <div class="modal-body">
                <div class="config-field">
                    <label for="card-title" id="card-title-label">卡片标题:</label>
                    <input type="text" id="card-title" placeholder="输入卡片标题">
                </div>
                <div class="config-field">
                    <label id="card-data-source-label">数据来源:</label>
                    <div class="checkbox-group">
                        <label class="checkbox-label" id="card-type-bookmarks-label">
                            <input type="checkbox" id="card-type-bookmarks" value="bookmarks">
                            <span id="card-type-bookmarks-text">收藏夹</span>
                        </label>
                        <label class="checkbox-label" id="card-type-history-label">
                            <input type="checkbox" id="card-type-history" value="history">
                            <span id="card-type-history-text">历史记录</span>
                        </label>
                    </div>
                </div>
                <div class="config-field">
                    <label for="card-filter" id="card-filter-label">筛选关键词:</label>
                    <input type="text" id="card-filter" placeholder="例: github 或 title:新闻 或 /^https/" title="支持: 关键词 | title:文本 | url:文本 | /正则/ | title:/正则/ | url:/正则/">
                    <small class="filter-hint" id="card-filter-hint">支持语法: 关键词 | title:文本 | url:文本 | /正则/ | title:/正则/ | url:/正则/</small>
                </div>
                <div class="config-field" id="history-time-field" style="display: none;">
                    <label for="card-history-days" id="history-time-label">历史记录时间范围:</label>
                    <select id="card-history-days">
                        <option value="1" id="history-option-1">最近1天</option>
                        <option value="7" id="history-option-7">最近7天</option>
                        <option value="30" id="history-option-30">最近30天</option>
                        <option value="0" id="history-option-all">全部</option>
                    </select>
                </div>
                <div class="config-field" id="bookmarks-folder-field" style="display: none;">
                    <label for="card-folder-filter" id="bookmarks-folder-label">收藏夹文件夹:</label>
                    <input type="text" id="card-folder-filter" placeholder="输入文件夹名称（可选）">
                </div>
                <div class="config-field">
                    <label for="card-max-items" id="card-max-items-label">最大显示数量:</label>
                    <input type="number" id="card-max-items" value="10" min="1" max="50">
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-button secondary" id="cancel-card-config">取消</button>
                <button class="modal-button primary" id="save-card-config">保存</button>
            </div>
        </div>
    </div>

    <!-- 布局设置模态框 -->
    <div id="layout-config-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="layout-config-title">布局设置</h3>
                <button class="modal-close" id="close-layout-config">&times;</button>
            </div>
            <div class="modal-body">
                <div class="config-field">
                    <label for="cards-per-row" id="cards-per-row-label">每行卡片数量:</label>
                    <input type="number" id="cards-per-row" value="2" min="1" max="6">
                </div>
                <div class="config-field">
                    <label for="card-height" id="card-height-label">卡片高度 (px):</label>
                    <input type="number" id="card-height" value="250" min="150" max="600" step="25">
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-button secondary" id="cancel-layout-config">取消</button>
                <button class="modal-button primary" id="save-layout-config">保存</button>
            </div>
        </div>
    </div>

    <script type="module" src="index.js"></script>
</body>
</html>
